<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>è²·ã„ç‰©ãƒªã‚¹ãƒˆ</title>

	<style>
	.memo-container {
	    width: 60%;
	    margin: 20px auto;
	    background: #fff9c4; /* è–„ã„é»„è‰²ã§ãƒ¡ãƒ¢ç´™é¢¨ */
	    padding: 20px;
	    border: 2px dashed #fbc02d;
	    border-radius: 10px;
	    box-shadow: 3px 3px 6px rgba(0,0,0,0.2);
	    font-family: 'Comic Sans MS', cursive;
	}

	table {
	    width: 100%;
	    border-collapse: collapse;
	}

	th, td {
	    padding: 8px 12px;
	    text-align: left;
	    border-bottom: 1px dashed #fbc02d;
	}

	th {
	    background-color: #fff3e0;
	}

	td span.pencil {
	    margin-left: 5px;
	    font-size: 16px;
	    cursor: pointer;
	}

	.button {
	    padding: 6px 12px;
	    font-size: 14px;
	    cursor: pointer;
	    margin: 5px;
	    border-radius: 6px;
	    border: none;
	    background-color: #ffcc80;
	    box-shadow: 1px 2px 4px rgba(0,0,0,0.2);
	}

	.button:hover {
	    background-color: #ffb74d;
	}

	.selected-row {
	    background-color: #ffe6e6; /* ãƒã‚§ãƒƒã‚¯ã—ãŸã‚‰è–„ã„èµ¤ */
	}
	.hidden {
	    display: none;
	}

	.back-container {
	    text-align: center;
	    margin-top: 20px;
	}
	</style>

</head>
<body>
	<h1 style="text-align:center; font-family: 'Comic Sans MS', cursive;">ğŸ“ è²·ã„ç‰©ãƒªã‚¹ãƒˆ</h1>

	<div class="memo-container">
	    <div class="control-buttons" style="text-align:right;">
	        <button onclick="checkAll()" class="button">å…¨ã¦ãƒã‚§ãƒƒã‚¯</button>
	        <button onclick="uncheckAll()" class="button">å…¨ã¦è§£é™¤</button>
	    </div>

	    <table>
	        <tr>
	            <th>âœ”</th>
	            <th>é£Ÿæ</th>
	            <th>é‡</th>
	            <th class="hidden">ã‚«ãƒ†ã‚´ãƒª</th>
	            <th class="hidden">è³¼å…¥æ—¥</th>
	            <th class="hidden">è³¼å…¥æ¸ˆã¿</th>
	            <th>æ“ä½œ</th>
	        </tr>

	        <tr th:each="item : ${listItems}">
	            <td><input type="checkbox" name="selectedItems"></td>
	            <td>
	                <span th:text="${item.name}"></span>
	                <span class="pencil">âœï¸</span>
	            </td>
	            <td th:text="${item.amount}"></td>
	            <td class="hidden" th:text="${item.categoryName}"></td>
	            <td class="hidden" th:text="${item.purchaseDate}"></td>
	            <td class="hidden" th:text="${item.purchasedFlg}"></td>
	            <td>
	                <!-- ä½¿ã„åˆ‡ã£ãŸãƒœã‚¿ãƒ³ -->
	                <form th:action="@{/users/stop/{id}(id=${item.id})}" method="post"
	                      onsubmit="return confirm('ä½¿ã„åˆ‡ã‚Šã¾ã—ãŸã‹ï¼Ÿ');" style="display:inline;">
	                    <input type="submit" value="è³¼å…¥æ¸ˆã¿ã«ã™ã‚‹" class="button">
	                </form>
	            </td>
	        </tr>
	    </table>
	</div>

	<!-- æˆ»ã‚‹ãƒœã‚¿ãƒ³ -->
	<div class="back-container">
	    <a th:href="@{/users}" class="button">â† æˆ»ã‚‹</a>
	</div>

	<script>
	    // å…¨ãƒã‚§ãƒƒã‚¯ãƒ»å…¨è§£é™¤
	    function checkAll() {
	        document.querySelectorAll('input[name="selectedItems"]').forEach(cb => {
	            cb.checked = true;
	            highlightRow(cb);
	        });
	    }

	    function uncheckAll() {
	        document.querySelectorAll('input[name="selectedItems"]').forEach(cb => {
	            cb.checked = false;
	            highlightRow(cb);
	        });
	    }

	    // è¡Œã®èƒŒæ™¯è‰²ã‚’ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ã«å¿œã˜ã¦å¤‰æ›´
	    function highlightRow(checkbox) {
	        const row = checkbox.closest('tr');
	        if (checkbox.checked) {
	            row.classList.add('selected-row');
	        } else {
	            row.classList.remove('selected-row');
	        }
	    }

	    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®çŠ¶æ…‹ã«å¿œã˜ã¦èƒŒæ™¯è‰²ã‚’è¨­å®š
	    window.addEventListener('DOMContentLoaded', function() {
	        document.querySelectorAll('input[name="selectedItems"]').forEach(cb => {
	            cb.addEventListener('change', () => highlightRow(cb));
	            highlightRow(cb); // åˆæœŸçŠ¶æ…‹ãƒã‚§ãƒƒã‚¯
	        });
	    });
	</script>

</body>
</html>
